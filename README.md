# szu-mcu

深圳大学-微处理器与机器人-期末大作业

## 核心模块

------

STM32小车

## 外接模块

------

红外检测模块、有源蜂鸣器、三色LED、MPU6050六轴姿态传感器、OLED显示屏

## 核心问题

------

由于小车后轮老旧和不稳定，会对小车旋转姿态产生很大影响，普通的for循环旋转很难实现指定角度旋转，状态随机，旋转角时而偏大时而偏小，故添加MPU6050控制姿态，实现较为准确的旋转。

## 主要实现

------

通过红外检测模块检测障碍物实现避障，LED会相应改变颜色（红绿蓝黄青洋红白），检测到障碍物时蜂鸣器发声。

MPU6050和OLED显示屏通过I2C通信连接，可以根据MPU6050得到小车的实时加速度和角速度，再将返回的数据在中断函数进行积分得到速度和旋转角度，以实现指定角度旋转。

同时OLED显示屏在直走时会显示No Obstacle表示没有检测到障碍物，同时显示当前加速度、角速度、速度和偏转角；在检测到障碍物时显示Found Obstacle，同时显示当前偏转角。

由于小车固有原因，直走很难走直，故使用MPU6050获取实时角度，进而在角度偏差达到2.5°时自动校正。
